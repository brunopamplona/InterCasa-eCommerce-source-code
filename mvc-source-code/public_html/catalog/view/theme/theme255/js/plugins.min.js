/*
 * jqModal - Minimalist Modaling with jQuery
 *
 * Copyright (c) 2007-2014 Brice Burgess @iceburg_net
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * $Version: 2014.01.30 +r17 (aka 1.0.0)
 * Requires: jQuery 1.2.3+
 */
(function(r,f,s){$.fn.jqm=function(a){var b=$.extend({},$.jqm.params,a);return this.each(function(){var a=$(this),c=$(this).data("jqm");c||(c={ID:n++});a.data("jqm",$.extend(b,c)).addClass("jqm-init");b.trigger&&$(this).jqmAddTrigger(b.trigger)})};$.fn.jqmAddTrigger=function(a){return this.each(function(){k($(this),"jqmShow",a)||f.console&&f.console.error&&f.console.error("jqmAddTrigger must be called on initialized modals")})};$.fn.jqmAddClose=function(a){return this.each(function(){k($(this),"jqmHide",
a)||f.console&&f.console.error&&f.console.error("jqmAddClose must be called on initialized modals")})};$.fn.jqmShow=function(a){return this.each(function(){!this._jqmShown&&p($(this),a)})};$.fn.jqmHide=function(a){return this.each(function(){if(this._jqmShown){var b=$(this),d=a,c=b.data("jqm"),d=d||f.event,b={w:b,c:c,o:b.data("jqmv"),t:d},d=b.w,c=b.o,e=b.c;!1!==e.onHide(b)&&(d[0]._jqmShown=!1,e.modal&&(g.pop(),!g[0]&&l("unbind")),e.toTop&&c&&$("#jqmP"+e.ID).after(d).remove())}})};var p=function(a,
b){var d=a.data("jqm");b=b||f.event;var c=parseInt(a.css("z-index")),c=0<c?c:3E3,e=$("<div></div>").addClass(d.overlayClass).css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":c-1,opacity:d.overlay/100});h={w:a,c:d,o:e,t:b};a.css("z-index",c);d.ajax?(c=d.target||a,e=d.ajax,c="string"==typeof c?$(c,a):$(c),"@"==e.substr(0,1)&&(e=$(b).attr(e.substring(1))),c.html(d.ajaxText).load(e,function(){d.onLoad&&d.onLoad.call(this,h);m(h)})):m(h)},k=function(a,b,d){return a.data("jqm")?$(d).each(function(){this[b]=
this[b]||[];this[b].push(a)}).click(function(){var a=this;$.each(this[b],function(d,f){f[b](a)});return!1}):!1},m=function(a){var b=a.w,d=a.o,c=a.c;!1!==c.onShow(a)&&(b[0]._jqmShown=!0,c.modal?(!g[0]&&l("bind"),g.push(b)):b.jqmAddClose(d),c.closeClass&&b.jqmAddClose($("."+c.closeClass,b)),c.toTop&&d&&b.before('<span id="jqmP'+c.ID+'"></span>').insertAfter(d),b.data("jqmv",d))},l=function(a){$(document)[a]("keypress keydown mousedown",q)},q=function(a){a=$(a.target).data("jqm")||$(a.target).parents(".jqm-init:first").data("jqm");
var b=g[g.length-1].data("jqm");return a&&a.ID==b.ID?!0:$.jqm.focusFunc(b)},n=0,g=[];$.jqm={params:{overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:!1,target:!1,ajaxText:"",modal:!1,toTop:!1,onShow:function(a){0<a.c.overlay&&a.o.prependTo("body");a.w.show();$.jqm.focusFunc(a.w);return!0},onHide:function(a){a.w.hide()&&a.o&&a.o.remove();return!0},onLoad:!1},focusFunc:function(a){$(":input:visible:first",a).focus();return!1}}})(jQuery,window);